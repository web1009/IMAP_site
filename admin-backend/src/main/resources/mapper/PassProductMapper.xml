<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.project.app.payment.mapper.PassProductMapper">

    <resultMap id="PassProductResultMap" type="com.project.app.payment.domain.PassProduct">
        <id property="prodId" column="prod_id" />
        <result property="sportId" column="sport_id" />
        <result property="brchId" column="brch_id" />
        <result property="prodNm" column="prod_nm" />
        <result property="prodAmt" column="prod_amt" />
        <result property="prvCnt" column="prv_cnt" />
        <result property="useYn" column="use_yn" />
        <result property="regDt" column="reg_dt" />
        <result property="updDt" column="upd_dt" />
        <result property="modUsrId" column="mod_usr_ID" />
    </resultMap>

    <select id="findAll" resultMap="PassProductResultMap">
        SELECT 
            prod_id,
            sport_id,
            brch_id,
            prod_nm,
            prod_amt,
            prv_cnt,
            use_yn,
            reg_dt,
            upd_dt,
            mod_usr_ID
        FROM pass_product
        ORDER BY reg_dt DESC
    </select>

    <select id="findById" resultMap="PassProductResultMap">
        SELECT 
            prod_id,
            sport_id,
            brch_id,
            prod_nm,
            prod_amt,
            prv_cnt,
            use_yn,
            reg_dt,
            upd_dt,
            mod_usr_ID
        FROM pass_product
        WHERE prod_id = #{prodId}
    </select>

    <insert id="insert" parameterType="com.project.app.payment.domain.PassProduct" useGeneratedKeys="true" keyProperty="prodId">
        INSERT INTO pass_product (
            sport_id,
            brch_id,
            prod_nm,
            prod_amt,
            prv_cnt,
            use_yn,
            reg_dt,
            upd_dt,
            mod_usr_ID
        ) VALUES (
            #{sportId},
            #{brchId},
            #{prodNm},
            #{prodAmt},
            #{prvCnt},
            #{useYn},
            NOW(),
            NOW(),
            #{modUsrId}
        )
    </insert>

    <update id="update" parameterType="com.project.app.payment.domain.PassProduct">
        UPDATE pass_product
        SET
            sport_id = #{sportId},
            brch_id = #{brchId},
            prod_nm = #{prodNm},
            prod_amt = #{prodAmt},
            prv_cnt = #{prvCnt},
            use_yn = #{useYn},
            upd_dt = NOW(),
            mod_usr_ID = #{modUsrId}
        WHERE prod_id = #{prodId}
    </update>

    <delete id="delete">
        DELETE FROM pass_product WHERE prod_id = #{prodId}
    </delete>

</mapper>
