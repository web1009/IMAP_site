<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.project.app.payment.mapper.PaymentMapper">

    <resultMap id="PaymentResultMap" type="com.project.app.payment.domain.Payment">
        <id property="payId" column="pay_id" />
        <result property="orderNo" column="order_no" />
        <result property="brchId" column="brch_id" />
        <result property="usrId" column="usr_id" />
        <result property="payTypeCd" column="pay_type_cd" />
        <result property="refId" column="ref_id" />
        <result property="payAmt" column="pay_amt" />
        <result property="payMethod" column="pay_method" />
        <result property="sttsCd" column="stts_cd" />
        <result property="regDt" column="reg_dt" />
        <result property="pgOrderNo" column="pg_order_no" />
        <result property="targetId" column="target_id" />
        <result property="targetName" column="target_name" />
    </resultMap>

    <select id="findAll" resultMap="PaymentResultMap">
        SELECT * FROM payment ORDER BY reg_dt DESC
    </select>

    <select id="findById" resultMap="PaymentResultMap">
        SELECT * FROM payment WHERE pay_id = #{payId}
    </select>

    <insert id="insert" parameterType="com.project.app.payment.domain.Payment" useGeneratedKeys="true" keyProperty="payId">
        INSERT INTO payment (
            order_no,
            brch_id,
            usr_id,
            pay_type_cd,
            ref_id,
            pay_amt,
            pay_method,
            stts_cd,
            reg_dt,
            pg_order_no,
            target_id,
            target_name
        ) VALUES (
            #{orderNo},
            #{brchId},
            #{usrId},
            #{payTypeCd},
            #{refId},
            #{payAmt},
            #{payMethod},
            #{sttsCd},
            NOW(),
            #{pgOrderNo},
            #{targetId},
            #{targetName}
        )
    </insert>

    <update id="update" parameterType="com.project.app.payment.domain.Payment">
        UPDATE payment
        SET
            order_no = #{orderNo},
            brch_id = #{brchId},
            usr_id = #{usrId},
            pay_type_cd = #{payTypeCd},
            ref_id = #{refId},
            pay_amt = #{payAmt},
            pay_method = #{payMethod},
            stts_cd = #{sttsCd},
            pg_order_no = #{pgOrderNo},
            target_id = #{targetId},
            target_name = #{targetName}
        WHERE pay_id = #{payId}
    </update>

    <delete id="delete">
        DELETE FROM payment WHERE pay_id = #{payId}
    </delete>

</mapper>
